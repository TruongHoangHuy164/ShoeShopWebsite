@model IEnumerable<ShoeShopWebsite.Models.Product>

@{
    ViewData["Title"] = "Sản phẩm";
    
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Sản Phẩm - ShoeShopWebsite</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .product-grid {
            padding: 20px 0;
        }

        .product-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

            .product-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            }

            .product-card img {
                max-height: 200px;
                object-fit: cover;
                margin-bottom: 10px;
            }

        .product-title {
            font-size: 1.1rem;
            margin: 10px 0;
            height: 50px;
            overflow: hidden;
        }

        .product-price {
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

        .btn-group {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-top: auto;
        }

        .search-filter {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Thanh tìm kiếm và bộ lọc -->
        <div class="search-filter">
            <div class="row g-3">
                <div class="col-md-3">
                    <input type="text" class="form-control" id="searchName" placeholder="Tìm theo tên sản phẩm">
                </div>
                <div class="col-md-3">
                    <select class="form-select" id="filterColor">
                        <option value="">Chọn màu</option>
                        <option value="Đen">Đen</option>
                        <option value="Trắng">Trắng</option>
                        <option value="Xám">Xám</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select class="form-select" id="filterSize">
                        <option value="">Chọn kích thước</option>
                        <option value="38">38</option>
                        <option value="39">39</option>
                        <option value="40">40</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select class="form-select" id="filterCategory">
                        <option value="">Chọn danh mục</option>
                        <option value="Giày thể thao">Giày thể thao</option>
                        <option value="Giày công sở">Giày công sở</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Danh sách sản phẩm -->
        <div class="row product-grid" id="productList">
            <!-- Sản phẩm mẫu -->
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Thể Thao Đen" data-color="Đen" data-size="38" data-category="Giày thể thao">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Thể Thao Đen">
                    <h5 class="product-title">Giày Thể Thao Đen</h5>
                    <p class="product-price">500,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="1"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="1"><i class="fas fa-heart"></i></button>
                        <a href="#details1" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Công Sở Trắng" data-color="Trắng" data-size="39" data-category="Giày công sở">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Công Sở Trắng">
                    <h5 class="product-title">Giày Công Sở Trắng</h5>
                    <p class="product-price">600,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="2"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="2"><i class="fas fa-heart"></i></button>
                        <a href="#details2" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Thể Thao Xám" data-color="Xám" data-size="40" data-category="Giày thể thao">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Thể Thao Xám">
                    <h5 class="product-title">Giày Thể Thao Xám</h5>
                    <p class="product-price">550,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="3"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="3"><i class="fas fa-heart"></i></button>
                        <a href="#details3" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Công Sở Đen" data-color="Đen" data-size="38" data-category="Giày công sở">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Công Sở Đen">
                    <h5 class="product-title">Giày Công Sở Đen</h5>
                    <p class="product-price">650,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="4"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="4"><i class="fas fa-heart"></i></button>
                        <a href="#details4" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Thể Thao Trắng" data-color="Trắng" data-size="39" data-category="Giày thể thao">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Thể Thao Trắng">
                    <h5 class="product-title">Giày Thể Thao Trắng</h5>
                    <p class="product-price">520,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="5"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="5"><i class="fas fa-heart"></i></button>
                        <a href="#details5" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Công Sở Xám" data-color="Xám" data-size="40" data-category="Giày công sở">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Công Sở Xám">
                    <h5 class="product-title">Giày Công Sở Xám</h5>
                    <p class="product-price">680,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="6"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="6"><i class="fas fa-heart"></i></button>
                        <a href="#details6" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Thể Thao Đen Cao Cấp" data-color="Đen" data-size="38" data-category="Giày thể thao">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Thể Thao Đen Cao Cấp">
                    <h5 class="product-title">Giày Thể Thao Đen Cao Cấp</h5>
                    <p class="product-price">800,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="7"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="7"><i class="fas fa-heart"></i></button>
                        <a href="#details7" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4 product-item" data-name="Giày Công Sở Trắng Cao Cấp" data-color="Trắng" data-size="39" data-category="Giày công sở">
                <div class="product-card">
                    <img src="https://via.placeholder.com/200" alt="Giày Công Sở Trắng Cao Cấp">
                    <h5 class="product-title">Giày Công Sở Trắng Cao Cấp</h5>
                    <p class="product-price">900,000 đ</p>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-success add-to-cart" data-id="8"><i class="fas fa-cart-plus"></i></button>
                        <button class="btn btn-sm btn-danger add-to-wishlist" data-id="8"><i class="fas fa-heart"></i></button>
                        <a href="#details8" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Tìm kiếm và lọc sản phẩm
            function filterProducts() {
                const name = $('#searchName').val().toLowerCase();
                const color = $('#filterColor').val();
                const size = $('#filterSize').val();
                const category = $('#filterCategory').val();

                $('.product-item').each(function () {
                    const productName = $(this).data('name').toLowerCase();
                    const productColor = $(this).data('color');
                    const productSize = $(this).data('size');
                    const productCategory = $(this).data('category');

                    const matchName = productName.includes(name);
                    const matchColor = !color || productColor === color;
                    const matchSize = !size || productSize === size;
                    const matchCategory = !category || productCategory === category;

                    if (matchName && matchColor && matchSize && matchCategory) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }

            $('#searchName, #filterColor, #filterSize, #filterCategory').on('input change', filterProducts);

            // Thêm vào giỏ hàng
            $('.add-to-cart').on('click', function () {
                const productId = $(this).data('id');
                showToast(`Đã thêm sản phẩm ${productId} vào giỏ hàng!`, true);
                // Gửi AJAX đến server nếu cần
            });

            // Thêm vào danh sách yêu thích
            $('.add-to-wishlist').on('click', function () {
                const productId = $(this).data('id');
                const $button = $(this);
                $button.toggleClass('btn-danger btn-outline-danger');
                const isAdded = $button.hasClass('btn-danger');
                showToast(`Đã ${isAdded ? 'thêm' : 'xóa'} sản phẩm ${productId} ${isAdded ? 'vào' : 'khỏi'} danh sách yêu thích!`, true);
                // Gửi AJAX đến server nếu cần
            });

            // Hiển thị toast thông báo
            function showToast(message, isSuccess) {
                const toastClass = isSuccess ? 'bg-success' : 'bg-danger';
                const toastId = 'toast-' + new Date().getTime();
                const toastHtml = `
                    <div id="${toastId}" class="toast ${toastClass} text-white" role="alert">
                        <div class="toast-body">${message}</div>
                    </div>
                `;
                $('body').append(toastHtml);
                const $toast = $(`#${toastId}`);
                $toast.toast({ delay: 2000 });
                $toast.toast('show');
                $toast.on('hidden.bs.toast', function () {
                    $(this).remove();
                });
            }
        });
    </script>
</body>
</html>